<h1>Genes#index</h1>
<p>Find me in app/views/genes/index.html.erb</p>


<table>
  <tr>
    <th> Gene id </th>
    <th> Gene symbol </th>
    <th> Gene's chip(s)</th>
  </tr>
  <% @genes.each do |g| %>
  <tr>
    <td><%= link_to g.id, gene_path(g) %></td>
    <td><%= g.symbol %></td>
    <% if g.chips.count > 1 %>
    <% g.chips.each do |c| %>
    <td><%= c.chip_id + ", " %></td>
    <% end %>
    <% elsif g.chips.count == 1 %>
    <td><%= g.chips.first.chip_id %></td>
    <% end %>
  </tr>
  <% end %>
</table>
<br/>
<table>
  <tr>
    <th> Tissue name </th>
    <th> Tissue total </th>
  </tr>
  <% @tissues.each do |t| %>
  <tr>
    <td><%= t.name %></td>
    <td><%= t.total %></td>
  </tr>
  <% end %>
</table>
<br/>
<h3>Chips</h3>
<table>
  <tr>
    <th>Id</th>
    <th>Chip id</th>
    <th>Gene id</th>
    <th>Gene name</th>
  </tr>
  <% @chips.each do |c| %>
  <tr>
    <td><%= c.id %></td>
    <td><%= c.chip_id %></td>
    <td><%= c.gene_id %></td>
    <% if c.gene != nil %>
    <td><%= c.gene.symbol %></td>
    <% end %>
  </tr>
  <% end %>
</table>
<br />
<table>
  <tr>
    <th> Value id    </th>
    <th> chip_id   </th>
    <th> gene name </th>
    <th> Tissue name </th>
    <th> Tissue id </th>
    <th> mean        </th>
    <th> Mean greater than 10? </th>
  </tr>
  <% @values.each do |v| %>
  <tr>
    <td><%= v.id %></td>
    <td><%= v.chip_id %></td>
    <% chip = Chip.find_by_id(v.chip_id) %>
    <% if Gene.find_by_id(chip.gene_id) != nil %>
    <td><%= Gene.find_by_id(chip.gene_id).symbol %></td>
    <% end %>
    <% n = v.tissue_id %>
    <td><%= Tissue.find_by_id(n).name %></td>
    <td><%= v.tissue_id.to_i %></td>
    <td><%= v.mean %></td>
    <% if v.mean > 10 %>
    <td>True</td>
    <% else %>
    <td>False</td>
    <% end %>
  </tr>
  <% end %>
</table>
<br/>
<% @values_relevant.each do |v| %>
<p><%= v.mean %></p>
<% end %>
<%= form_tag genes_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Gene Search" %>
  </p>
<% end %>
<% if @cool_genes %>
<%= @cool_genes.each do |cg| %>
<p><%= cg.symbol %></p>
<% end %>
<% end %>



<a><%= link_to "New Gene!", new_gene_path %></a>
