<h1>Genes#index</h1>
<p>Find me in app/views/genes/index.html.erb</p>

<%= form_tag genes_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Gene Search" %>
  </p>
<% end %>
<% if @found_genes %>
<table>
  <tr>
    <th>Gene id</th>
    <th>Gene symbol</th>
    <th>Gene chip(s)</th>
  </tr>
<% @found_genes.each do |cg| %>
  <tr>
    <td><%= cg.id %></td>
    <td><%= link_to cg.symbol, gene_path(cg) %></td>
    <% if cg.chips.count >= 1 %>
    <% cg.chips.each do |chip| %>
    <td><%= link_to chip.name, chip_path(chip) %></td>
    <% end %>
    <% end %>
  </tr>
<% end %>
<% end %>
</table>

<br/>

<table>
  <tr>
    <th> Expression id    </th>
    <th> chip id </th>
    <th> gene name </th>
    <th> Tissue name </th>
    <th> Tissue id </th>
    <th> mean        </th>
    <th> Mean greater than 10? </th>
  </tr>
  <% @expressions.each do |v| %>
  <tr>
    <td><%= v.id %></td>
    <td><%= v.chip_id %></td>
    <% chip = Chip.find_by_id(v.chip_id) %>
    <% if Gene.find_by_id(chip.gene_id) != nil %>
    <td><%= Gene.find_by_id(chip.gene_id).symbol %></td>
    <% end %>
    <% n = v.tissue_id %>
    <td><%= Tissue.find_by_id(n).name %></td>
    <td><%= v.tissue_id.to_i %></td>
    <td><%= v.mean %></td>
    <% if v.mean > 10 %>
    <td>True</td>
    <% else %>
    <td>False</td>
    <% end %>
  </tr>
  <% end %>
</table>
<br/>
<% @expressions_relevant.each do |v| %>
<p><%= v.mean %></p>
<% end %>


